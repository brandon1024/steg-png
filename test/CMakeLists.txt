FILE(GLOB_RECURSE TEST_LIST FOLLOW_SYMLINKS ${PROJECT_SOURCE_DIR}/test/*.sh)

FIND_PROGRAM(BASH_INTERPRETER bash)

FILE(COPY ${PROJECT_SOURCE_DIR}/test/resources DESTINATION ${PROJECT_BINARY_DIR}/test)

FOREACH(test_executable ${TEST_LIST})
	GET_FILENAME_COMPONENT(FILENAME ${test_executable} NAME)
	CONFIGURE_FILE(
			"${test_executable}"
			"${PROJECT_BINARY_DIR}/test/${FILENAME}"
			COPYONLY
	)

	ADD_TEST("${FILENAME}" COMMAND ${BASH_INTERPRETER} ${PROJECT_BINARY_DIR}/test/${FILENAME})
ENDFOREACH()
